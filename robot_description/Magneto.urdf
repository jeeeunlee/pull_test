<?xml version="1.0" encoding="utf-8"?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from magneto.xacro                  | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="magneto">
  <!-- Setup material colours for viewing in RViz -->
  <material name="white">
    <color rgba="1 1 1 1"/>
  </material>
  <material name="blue">
    <color rgba="0 0 1 1"/>
  </material>
  <material name="green">
    <color rgba="0 1 0 1"/>
  </material>
  <material name="red">
    <color rgba="1 0 0 1"/>
  </material>
  <!-- To view URDF in rviz, run with roslaunch magneto_syropod display.launch -->
  <!-- To create a URDF, in robots folder, use  xacro magneto.xacro > magneto_test.urdf -->
  <!-- To build and sdf, in robots folder, use gz sdf -p magneto.urdf > magneto.sdf -->
  <!-- ADD FORCE TO SIMULATE MAGNETS  -->

  <!-- Setup main base_link -->
  <link name="world">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <mass value="0.00000001" />
      <inertia ixx="0.00000001" ixy="0.00000001" ixz="0.00000001" iyy="0.00000001" iyz="0.00000001" izz="0.00000001" />
    </inertial>
  </link>

  <link name="basePosX">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <mass value="0.00000001" />
      <inertia ixx="0.00000001" ixy="0.00000001" ixz="0.00000001" iyy="0.00000001" iyz="0.00000001" izz="0.00000001" />
    </inertial>
  </link>
  <joint name="basePosX" type="prismatic">
    <origin xyz="0 0 0" rpy="0 0 0" />
    <parent link="world" />
    <child link="basePosX" />
    <axis xyz="1 0 0" />
    <limit effort="200.0" velocity="100.0" lower="-200." upper="200." />
  </joint>

  <link name="basePosY">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <mass value="0.00000001" />
      <inertia ixx="0.00000001" ixy="0.00000001" ixz="0.00000001" iyy="0.00000001" iyz="0.00000001" izz="0.00000001" />
    </inertial>
  </link>
  <joint name="basePosY" type="prismatic">
    <origin xyz="0 0 0" rpy="0 0 0" />
    <parent link="basePosX" />
    <child link="basePosY" />
    <axis xyz="0 1 0" />
    <limit effort="200.0" velocity="100.0" lower="-200." upper="200." />
  </joint>

  <link name="basePosZ">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <mass value="0.00000001" />
      <inertia ixx="0.00000001" ixy="0.00000001" ixz="0.00000001" iyy="0.00000001" iyz="0.00000001" izz="0.00000001" />
    </inertial>
  </link>
  <joint name="basePosZ" type="prismatic">
    <origin xyz="0 0 0" rpy="0 0 0" />
    <parent link="basePosY" />
    <child link="basePosZ" />
    <axis xyz="0 0 1" />
    <limit effort="200.0" velocity="100.0" lower="-200." upper="200." />
  </joint>

  <link name="baseRotZ">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <mass value="0.00000001" />
      <inertia ixx="0.00000001" ixy="0.00000001" ixz="0.00000001" iyy="0.00000001" iyz="0.00000001" izz="0.00000001" />
    </inertial>
  </link>
  <joint name="baseRotZ" type="continuous">
    <origin xyz="0 0 0" rpy="0 0 0" />
    <parent link="basePosZ" />
    <child link="baseRotZ" />
    <axis xyz="0 0 1" />
  </joint>

  <link name="baseRotY">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <mass value="0.00000001" />
      <inertia ixx="0.00000001" ixy="0.00000001" ixz="0.00000001" iyy="0.00000001" iyz="0.00000001" izz="0.00000001" />
    </inertial>
  </link>
  <joint name="baseRotY" type="continuous">
    <origin xyz="0 0 0" rpy="0 0 0" />
    <parent link="baseRotZ" />
    <child link="baseRotY" />
    <axis xyz="0 1 0" />
  </joint>

  <link name="base_link">
    <inertial>
      <origin rpy="0 0 0" xyz="-0.2696E-03 0 33.3181E-03"/>
      <mass value="1.24521"/>
      <inertia ixx="0.0083421056972" ixy="-4.932e-08" ixz="-2.47500871e-05" iyy="0.0136724752281" iyz="2.37e-11" izz="0.0180888568473"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="meshes/base_link.stl"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="meshes/base_link_collision.stl"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
    </collision>
  </link>
  <joint name="_base_joint" type="continuous">
    <parent link="baseRotY"/>
    <child link="base_link"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <axis xyz="1 0 0" />
  </joint>
  <!-- SETUP IMU SENSOR  -->

  <link name="front_indicator">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <mass value="0.00000001" />
      <inertia ixx="0.00000001" ixy="0.00000001" ixz="0.00000001" iyy="0.00000001" iyz="0.00000001" izz="0.00000001" />
    </inertial>
    <visual>
      <geometry>
        <cylinder length="0.001" radius="0.005"/>
      </geometry>
      <material name="green"/>
    </visual>
  </link>

  <joint name="front_link_joint" type="fixed">
    <parent link="base_link"/>
    <child link="front_indicator"/>
    <origin rpy="0 0 0" xyz="0.085 0 0.08"/>
  </joint>
  <!-- Setup links and joints -->
  <link name="AR_coxa_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0.02017 0"/>
      <!-- Z listed as 0.00275 in solidworks, but set to zero here -->
      <mass value="0.05629"/>
      <inertia ixx="63834.17E-09" ixy="0" ixz="0" iyy="28435.19E-09" iyz="0" izz="43053.31E-09"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="meshes/coxa_link.stl"/>
      </geometry>
      <origin rpy="-1.5708 1.5708 0" xyz="0 0 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="meshes/coxa_link_collision.stl"/>
      </geometry>
      <origin rpy="-1.5708 1.5708 0" xyz="0 0.002 0"/>
    </collision>
  </link>

  <joint name="AR_coxa_joint" type="revolute">
    <axis xyz="0 1 0"/>
    <limit effort="100.0" lower="-2.355" upper="2.355" velocity="5"/>
    <parent link="base_link"/>
    <child link="AR_coxa_link"/>
    <origin rpy="1.5708 0 -0.785" xyz="0.125585 -0.095614 0.0527"/>
  </joint>
  <link name="AR_femur_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0.03310 0.01707 0.00057"/>
      <mass value="0.25695"/>
      <inertia ixx="234481.95E-09" ixy="89612.82E-09" ixz="22993.28E-09" iyy="1057680.13E-09" iyz="-822.12E-09" izz="1137178.68E-09"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="meshes/femur_link.stl"/>
      </geometry>
      <origin rpy="3.14159 0 0" xyz="0 0 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="meshes/femur_link_collision.stl"/>
      </geometry>
      <origin rpy="-1.5708 0 0" xyz="0 -0.015 0"/>
    </collision>
  </link>

  <joint name="AR_femur_joint" type="revolute">
    <axis xyz="0 0 1"/>
    <limit effort="100.0" lower="-1.571" upper="2.355" velocity="5"/>
    <parent link="AR_coxa_link"/>
    <child link="AR_femur_link"/>
    <origin rpy="0 0 0" xyz="0 0.0393 0"/>
  </joint>
  <link name="AR_tibia_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0.02851 -0.00001 0.00014"/>
      <mass value="0.20721"/>
      <inertia ixx="62871.39E-09" ixy="-357.79E-09" ixz="-3541.38E-09" iyy="397773.72E-09" iyz="114.38E-09" izz="374723.21E-09"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="meshes/tibia_link.stl"/>
      </geometry>
      <origin rpy="0 -1.5708 0" xyz="0.126 0 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="meshes/tibia_link_collision.stl"/>
      </geometry>
      <origin rpy="0 -1.5708 0" xyz="0.1263 0 0"/>
    </collision>
  </link>

  <joint name="AR_tibia_joint" type="revolute">
    <axis xyz="0 0 1"/>
    <limit effort="100.0" lower="-2.355" upper="0.001" velocity="5"/>
    <parent link="AR_femur_link"/>
    <child link="AR_tibia_link"/>
    <origin rpy="0 0 0" xyz="0.150 0 0"/>
  </joint>
  <link name="AR_foot_link_1">
    <inertial>
      <origin rpy="0 0 0" xyz="0.02E-03 2.88E-03 -4.39E-03"/>
      <mass value="0.03591"/>
      <inertia ixx="60131.00E-09" ixy="610.47E-09" ixz="387.97E-09" iyy="31108.13E-09" iyz="346.50E-09" izz="31112.38E-09"/>
    </inertial>
     --&gt;
    
    <visual>
      <geometry>
        <mesh filename="meshes/foot_link_1.stl"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="meshes/foot_link_1_collision.stl"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
    </collision>
  </link>

  <joint name="AR_foot_joint_1" type="revolute">
    <axis xyz="0 0 1"/>
    <limit effort="100.0" lower="-0.523599" upper="0.523599" velocity="5"/>
    <parent link="AR_tibia_link"/>
    <child link="AR_foot_link_1"/>
    <origin rpy="0 0 0" xyz="0.12 0 0"/>
    <dynamics damping="0.2" friction="0.0"/>
  </joint>

  <link name="AR_foot_link_2">
    <inertial>
      <origin rpy="0 0 0" xyz="0.02E-03 2.88E-03 -4.39E-03"/>
      <mass value="0.02961"/>
      <inertia ixx="8786.61E-09" ixy="34.74E-09" ixz="7.47E-09" iyy="10893.41E-09" iyz="-95.83E-09" izz="17608.23E-09"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="meshes/foot_link_2.stl"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="meshes/foot_link_2_collision.stl"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
    </collision>
  </link>

  <joint name="AR_foot_joint_2" type="revolute">
    <axis xyz="0 1 0"/>
    <limit effort="100.0" lower="-0.418879" upper="0.418879" velocity="5"/>
    <parent link="AR_foot_link_1"/>
    <child link="AR_foot_link_2"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <dynamics damping="0.2" friction="0.0"/>
  </joint>

  <link name="AR_foot_link_3">
    <inertial>
      <origin rpy="0 0 0" xyz="0.02E-03 2.88E-03 -4.39E-03"/>
      <mass value="0.19862"/>
      <inertia ixx="49836.99E-09" ixy="144.66E-09" ixz="-4031.72E-09" iyy="81967.91E-09" iyz="-678.12E-09" izz="69129.32E-09"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="meshes/foot_link_3.stl"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="meshes/foot_link_3_collision.stl"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
    </collision>
  </link>

  <joint name="AR_foot_joint_3" type="revolute">
    <axis xyz="1 0 0"/>
    <limit effort="100.0" lower="-2.07694" upper="2.07694" velocity="5"/>
    <parent link="AR_foot_link_2"/>
    <child link="AR_foot_link_3"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <dynamics damping="0.2" friction="0.0"/>
  </joint>

  <link name="AR_foot_link">
    <!--THIS LINK IS ONLY USED FOR VISUALISATION IN RVIZ-->
    <!--visual>
      <geometry>
        <mesh filename="meshes/foot_link.stl"/>
      </geometry>
      <origin rpy="0 -1.5708 0" xyz="0 0 0"/>
      <material name="white"/>
    </visual-->
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0" />
      <mass value="0.000001" />
      <inertia ixx="1E-9" ixy="1E-9" ixz="1E-9" iyy="1E-9" iyz="1E-9" izz="1E-9" />
    </inertial>
  </link>
  <joint name="AR_foot_joint" type="fixed">
    <parent link="AR_foot_link_3"/>
    <child link="AR_foot_link"/>
    <origin rpy="0 -1.5708 0" xyz="0.031 0 0"/>
  </joint>
  <!-- Set up depth sensors (pico flexx) -->
  <link name="AR_depth_sensor_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0" />
      <mass value="0.35" />
      <inertia ixx="1E-9" ixy="1E-9" ixz="1E-9" iyy="1E-9" iyz="1E-9" izz="1E-9" />
    </inertial>
    <visual>
      <geometry>
        <mesh filename="meshes/depth_sensor.stl"/>
      </geometry>
      <origin rpy="1.5708 3.1415 -2.141519" xyz="-0.007 -0.0169 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.02 0.025 0.08"/>
        <!-- <mesh filename="meshes/foot_link_collision.stl"/> -->
      </geometry>
      <origin rpy="0 0 0" xyz="0 0.002 0.01"/>
      <!-- <origin rpy="0 0 0" xyz="0 0 0"/> -->
    </collision>
  </link>
  <joint name="AR_depth_sensor_joint" type="fixed">
    <origin rpy="0 0 0.5707" xyz="0.00234 0.03805 0"/>
    <parent link="AR_tibia_link"/>
    <child link="AR_depth_sensor_link"/>
  </joint>
  <joint name="AR_depth_sensor_optical_joint" type="fixed">
    <origin rpy="-1.5708 0 -1.5708" xyz="0 0 0"/>
    <parent link="AR_depth_sensor_link"/>
    <child link="gazebo_AR_leg_optical_frame"/>
  </joint>
  <link name="gazebo_AR_leg_optical_frame">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <mass value="0.00000001" />
      <inertia ixx="0.00000001" ixy="0.00000001" ixz="0.00000001" iyy="0.00000001" iyz="0.00000001" izz="0.00000001" />
    </inertial>
  </link>
  
  <!-- Setup transmissions for joints -->
  <transmission name="AR_coxa_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="AR_coxa_joint">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="AR_coxa_motor">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="AR_femur_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="AR_femur_joint">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="AR_femur_motor">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="AR_tibia_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="AR_tibia_joint">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="AR_tibia_motor">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>

  <!-- Setup links and joints -->
  <link name="BR_coxa_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0.02017 0"/>
      <!-- Z listed as 0.00275 in solidworks, but set to zero here -->
      <mass value="0.05629"/>
      <inertia ixx="63834.17E-09" ixy="0" ixz="0" iyy="28435.19E-09" iyz="0" izz="43053.31E-09"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="meshes/coxa_link.stl"/>
      </geometry>
      <origin rpy="-1.5708 1.5708 0" xyz="0 0 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="meshes/coxa_link_collision.stl"/>
      </geometry>
      <origin rpy="-1.5708 1.5708 0" xyz="0 0.002 0"/>
    </collision>
  </link>

  <joint name="BR_coxa_joint" type="revolute">
    <axis xyz="0 1 0"/>
    <limit effort="100.0" lower="-2.355" upper="2.355" velocity="5"/>
    <parent link="base_link"/>
    <child link="BR_coxa_link"/>
    <origin rpy="1.5708 0 -2.355" xyz="-0.125585 -0.095614 0.0527"/>
  </joint>
  <link name="BR_femur_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0.03310 0.01707 0.00057"/>
      <mass value="0.25695"/>
      <inertia ixx="234481.95E-09" ixy="89612.82E-09" ixz="22993.28E-09" iyy="1057680.13E-09" iyz="-822.12E-09" izz="1137178.68E-09"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="meshes/femur_link.stl"/>
      </geometry>
      <origin rpy="3.14159 0 0" xyz="0 0 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="meshes/femur_link_collision.stl"/>
      </geometry>
      <origin rpy="-1.5708 0 0" xyz="0 -0.015 0"/>
    </collision>
  </link>

  <joint name="BR_femur_joint" type="revolute">
    <axis xyz="0 0 1"/>
    <limit effort="100.0" lower="-1.571" upper="2.355" velocity="5"/>
    <parent link="BR_coxa_link"/>
    <child link="BR_femur_link"/>
    <origin rpy="0 0 0" xyz="0 0.0393 0"/>
  </joint>
  <link name="BR_tibia_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0.02851 -0.00001 0.00014"/>
      <mass value="0.20721"/>
      <inertia ixx="62871.39E-09" ixy="-357.79E-09" ixz="-3541.38E-09" iyy="397773.72E-09" iyz="114.38E-09" izz="374723.21E-09"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="meshes/tibia_link.stl"/>
      </geometry>
      <origin rpy="0 -1.5708 0" xyz="0.126 0 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="meshes/tibia_link_collision.stl"/>
      </geometry>
      <origin rpy="0 -1.5708 0" xyz="0.1263 0 0"/>
    </collision>
  </link>

  <joint name="BR_tibia_joint" type="revolute">
    <axis xyz="0 0 1"/>
    <limit effort="100.0" lower="-2.355" upper="0.001" velocity="5"/>
    <parent link="BR_femur_link"/>
    <child link="BR_tibia_link"/>
    <origin rpy="0 0 0" xyz="0.150 0 0"/>
  </joint>
  <link name="BR_foot_link_1">
    <inertial>
      <origin rpy="0 0 0" xyz="0.02E-03 2.88E-03 -4.39E-03"/>
      <mass value="0.03591"/>
      <inertia ixx="60131.00E-09" ixy="610.47E-09" ixz="387.97E-09" iyy="31108.13E-09" iyz="346.50E-09" izz="31112.38E-09"/>
    </inertial>
     --&gt;
    
    <visual>
      <geometry>
        <mesh filename="meshes/foot_link_1.stl"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="meshes/foot_link_1_collision.stl"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
    </collision>
  </link>

  <joint name="BR_foot_joint_1" type="revolute">
    <axis xyz="0 0 1"/>
    <limit effort="100.0" lower="-0.523599" upper="0.523599" velocity="5"/>
    <parent link="BR_tibia_link"/>
    <child link="BR_foot_link_1"/>
    <origin rpy="0 0 0" xyz="0.12 0 0"/>
    <dynamics damping="0.2" friction="0.0"/>
  </joint>

  <link name="BR_foot_link_2">
    <inertial>
      <origin rpy="0 0 0" xyz="0.02E-03 2.88E-03 -4.39E-03"/>
      <mass value="0.02961"/>
      <inertia ixx="8786.61E-09" ixy="34.74E-09" ixz="7.47E-09" iyy="10893.41E-09" iyz="-95.83E-09" izz="17608.23E-09"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="meshes/foot_link_2.stl"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="meshes/foot_link_2_collision.stl"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
    </collision>
  </link>

  <joint name="BR_foot_joint_2" type="revolute">
    <axis xyz="0 1 0"/>
    <limit effort="100.0" lower="-0.418879" upper="0.418879" velocity="5"/>
    <parent link="BR_foot_link_1"/>
    <child link="BR_foot_link_2"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <dynamics damping="0.2" friction="0.0"/>
  </joint>

  <link name="BR_foot_link_3">
    <inertial>
      <origin rpy="0 0 0" xyz="0.02E-03 2.88E-03 -4.39E-03"/>
      <mass value="0.19862"/>
      <inertia ixx="49836.99E-09" ixy="144.66E-09" ixz="-4031.72E-09" iyy="81967.91E-09" iyz="-678.12E-09" izz="69129.32E-09"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="meshes/foot_link_3.stl"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="meshes/foot_link_3_collision.stl"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
    </collision>
  </link>

  <joint name="BR_foot_joint_3" type="revolute">
    <axis xyz="1 0 0"/>
    <limit effort="100.0" lower="-2.07694" upper="2.07694" velocity="5"/>
    <parent link="BR_foot_link_2"/>
    <child link="BR_foot_link_3"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <dynamics damping="0.2" friction="0.0"/>
  </joint>

  <link name="BR_foot_link">
    <!--THIS LINK IS ONLY USED FOR VISUALISATION IN RVIZ-->
    <!--visual>
      <geometry>
        <mesh filename="meshes/foot_link.stl"/>
      </geometry>
      <origin rpy="0 -1.5708 0" xyz="0 0 0"/>
      <material name="white"/>
    </visual-->
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0" />
      <mass value="0.000001" />
      <inertia ixx="1E-9" ixy="1E-9" ixz="1E-9" iyy="1E-9" iyz="1E-9" izz="1E-9" />
    </inertial>
  </link>
  <joint name="BR_foot_joint" type="fixed">
    <parent link="BR_foot_link_3"/>
    <child link="BR_foot_link"/>
    <origin rpy="0 -1.5708 0" xyz="0.031 0 0"/>
  </joint>
  <!-- Set up depth sensors (pico flexx) -->
  <link name="BR_depth_sensor_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0" />
      <mass value="0.35" />
      <inertia ixx="1E-9" ixy="1E-9" ixz="1E-9" iyy="1E-9" iyz="1E-9" izz="1E-9" />
    </inertial>
    <visual>
      <geometry>
        <mesh filename="meshes/depth_sensor.stl"/>
      </geometry>
      <origin rpy="1.5708 3.1415 -2.141519" xyz="-0.007 -0.0169 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.02 0.025 0.08"/>
        <!-- <mesh filename="meshes/foot_link_collision.stl"/> -->
      </geometry>
      <origin rpy="0 0 0" xyz="0 0.002 0.01"/>
      <!-- <origin rpy="0 0 0" xyz="0 0 0"/> -->
    </collision>
  </link>
  <joint name="BR_depth_sensor_joint" type="fixed">
    <origin rpy="0 0 0.5707" xyz="0.00234 0.03805 0"/>
    <parent link="BR_tibia_link"/>
    <child link="BR_depth_sensor_link"/>
  </joint>
  <joint name="BR_depth_sensor_optical_joint" type="fixed">
    <origin rpy="-1.5708 0 -1.5708" xyz="0 0 0"/>
    <parent link="BR_depth_sensor_link"/>
    <child link="gazebo_BR_leg_optical_frame"/>
  </joint>
  <link name="gazebo_BR_leg_optical_frame">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <mass value="0.00000001" />
      <inertia ixx="0.00000001" ixy="0.00000001" ixz="0.00000001" iyy="0.00000001" iyz="0.00000001" izz="0.00000001" />
    </inertial>
  </link>
  
  <!-- Setup transmissions for joints -->
  <transmission name="BR_coxa_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="BR_coxa_joint">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="BR_coxa_motor">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="BR_femur_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="BR_femur_joint">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="BR_femur_motor">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="BR_tibia_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="BR_tibia_joint">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="BR_tibia_motor">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  
  <!-- Setup links and joints -->
  <link name="BL_coxa_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0.02017 0"/>
      <!-- Z listed as 0.00275 in solidworks, but set to zero here -->
      <mass value="0.05629"/>
      <inertia ixx="63834.17E-09" ixy="0" ixz="0" iyy="28435.19E-09" iyz="0" izz="43053.31E-09"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="meshes/coxa_link.stl"/>
      </geometry>
      <origin rpy="-1.5708 1.5708 0" xyz="0 0 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="meshes/coxa_link_collision.stl"/>
      </geometry>
      <origin rpy="-1.5708 1.5708 0" xyz="0 0.002 0"/>
    </collision>
  </link>
  
  <joint name="BL_coxa_joint" type="revolute">
    <axis xyz="0 1 0"/>
    <limit effort="100.0" lower="-2.355" upper="2.355" velocity="5"/>
    <parent link="base_link"/>
    <child link="BL_coxa_link"/>
    <origin rpy="1.5708 0 2.355" xyz="-0.125585 0.095614 0.0527"/>
  </joint>
  <link name="BL_femur_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0.03310 0.01707 0.00057"/>
      <mass value="0.25695"/>
      <inertia ixx="234481.95E-09" ixy="89612.82E-09" ixz="22993.28E-09" iyy="1057680.13E-09" iyz="-822.12E-09" izz="1137178.68E-09"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="meshes/femur_link.stl"/>
      </geometry>
      <origin rpy="3.14159 0 0" xyz="0 0 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="meshes/femur_link_collision.stl"/>
      </geometry>
      <origin rpy="-1.5708 0 0" xyz="0 -0.015 0"/>
    </collision>
  </link>
  <gazebo reference="BL_femur_link">
    <selfCollide>true</selfCollide>
    <material>Gazebo/DarkGrey</material>
  </gazebo>
  <joint name="BL_femur_joint" type="revolute">
    <axis xyz="0 0 1"/>
    <limit effort="100.0" lower="-1.571" upper="2.355" velocity="5"/>
    <parent link="BL_coxa_link"/>
    <child link="BL_femur_link"/>
    <origin rpy="0 0 0" xyz="0 0.0393 0"/>
  </joint>
  <link name="BL_tibia_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0.02851 -0.00001 0.00014"/>
      <mass value="0.20721"/>
      <inertia ixx="62871.39E-09" ixy="-357.79E-09" ixz="-3541.38E-09" iyy="397773.72E-09" iyz="114.38E-09" izz="374723.21E-09"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="meshes/tibia_link.stl"/>
      </geometry>
      <origin rpy="0 -1.5708 0" xyz="0.126 0 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="meshes/tibia_link_collision.stl"/>
      </geometry>
      <origin rpy="0 -1.5708 0" xyz="0.1263 0 0"/>
    </collision>
  </link>
  <gazebo reference="BL_tibia_link">
    <selfCollide>true</selfCollide>
    <material>Gazebo/DarkGrey</material>
  </gazebo>
  <joint name="BL_tibia_joint" type="revolute">
    <axis xyz="0 0 1"/>
    <limit effort="100.0" lower="-2.355" upper="0.001" velocity="5"/>
    <parent link="BL_femur_link"/>
    <child link="BL_tibia_link"/>
    <origin rpy="0 0 0" xyz="0.150 0 0"/>
  </joint>
  <link name="BL_foot_link_1">
    <inertial>
      <origin rpy="0 0 0" xyz="0.02E-03 2.88E-03 -4.39E-03"/>
      <mass value="0.03591"/>
      <inertia ixx="60131.00E-09" ixy="610.47E-09" ixz="387.97E-09" iyy="31108.13E-09" iyz="346.50E-09" izz="31112.38E-09"/>
    </inertial>
     --&gt;
    
    <visual>
      <geometry>
        <mesh filename="meshes/foot_link_1.stl"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="meshes/foot_link_1_collision.stl"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
    </collision>
  </link>
  <gazebo reference="BL_foot_link_1">
    <selfCollide>false</selfCollide>
    <material>Gazebo/DarkGrey</material>
    <kp>1000000.0</kp>
    <kd>100.0</kd>
  </gazebo>
  <joint name="BL_foot_joint_1" type="revolute">
    <axis xyz="0 0 1"/>
    <limit effort="100.0" lower="-0.523599" upper="0.523599" velocity="5"/>
    <parent link="BL_tibia_link"/>
    <child link="BL_foot_link_1"/>
    <origin rpy="0 0 0" xyz="0.12 0 0"/>
    <dynamics damping="0.2" friction="0.0"/>
  </joint>
  <gazebo reference="BL_foot_joint_1">
    <implicitSpringDamper>true</implicitSpringDamper>
    <springStiffness>0.5</springStiffness>
    <springReference>0</springReference>
  </gazebo>
  <link name="BL_foot_link_2">
    <inertial>
      <origin rpy="0 0 0" xyz="0.02E-03 2.88E-03 -4.39E-03"/>
      <mass value="0.02961"/>
      <inertia ixx="8786.61E-09" ixy="34.74E-09" ixz="7.47E-09" iyy="10893.41E-09" iyz="-95.83E-09" izz="17608.23E-09"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="meshes/foot_link_2.stl"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="meshes/foot_link_2_collision.stl"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
    </collision>
  </link>
  <gazebo reference="BL_foot_link_2">
    <selfCollide>false</selfCollide>
    <material>Gazebo/DarkGrey</material>
    <kp>1000000.0</kp>
    <kd>100.0</kd>
  </gazebo>
  <joint name="BL_foot_joint_2" type="revolute">
    <axis xyz="0 1 0"/>
    <limit effort="100.0" lower="-0.418879" upper="0.418879" velocity="5"/>
    <parent link="BL_foot_link_1"/>
    <child link="BL_foot_link_2"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <dynamics damping="0.2" friction="0.0"/>
  </joint>
  <gazebo reference="BL_foot_joint_2">
    <implicitSpringDamper>true</implicitSpringDamper>
    <springStiffness>0.5</springStiffness>
    <springReference>0</springReference>
  </gazebo>
  <link name="BL_foot_link_3">
    <inertial>
      <origin rpy="0 0 0" xyz="0.02E-03 2.88E-03 -4.39E-03"/>
      <mass value="0.19862"/>
      <inertia ixx="49836.99E-09" ixy="144.66E-09" ixz="-4031.72E-09" iyy="81967.91E-09" iyz="-678.12E-09" izz="69129.32E-09"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="meshes/foot_link_3.stl"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="meshes/foot_link_3_collision.stl"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
    </collision>
  </link>
  <gazebo reference="BL_foot_link_3">
    <selfCollide>false</selfCollide>
    <material>Gazebo/DarkGrey</material>
    <visual>
      <plugin filename="libcolor_change_plugin.so" name="color_change">
        <control_topic>BL</control_topic>
      </plugin>
    </visual>
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>999999999999999999999999999999999999999</mu1>
    <mu2>999999999999999999999999999999999999999</mu2>
    <sensor name="BL_magnet_contact_sensor" type="contact">
      <always_on>true</always_on>
      <update_rate>30.0</update_rate>
      <contact>
        <collision>BL_foot_link_3_collision</collision>
      </contact>
      <plugin filename="libcontact_plugin.so" name="contact_plugin">
        <bumperTopicName>BL_proximity_sense</bumperTopicName>
        <frameName>BL_foot_link_3</frameName>
      </plugin>
    </sensor>
  </gazebo>
  <joint name="BL_foot_joint_3" type="revolute">
    <axis xyz="1 0 0"/>
    <limit effort="100.0" lower="-2.07694" upper="2.07694" velocity="5"/>
    <parent link="BL_foot_link_2"/>
    <child link="BL_foot_link_3"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <dynamics damping="0.2" friction="0.0"/>
  </joint>
  <gazebo reference="BL_foot_joint_3">
    <implicitSpringDamper>true</implicitSpringDamper>
    <springStiffness>0.5</springStiffness>
    <springReference>0</springReference>
  </gazebo>
  <link name="BL_foot_link">
    <!--THIS LINK IS ONLY USED FOR VISUALISATION IN RVIZ-->
    <!--visual>
      <geometry>
        <mesh filename="meshes/foot_link.stl"/>
      </geometry>
      <origin rpy="0 -1.5708 0" xyz="0 0 0"/>
      <material name="white"/>
    </visual-->
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0" />
      <mass value="0.000001" />
      <inertia ixx="1E-9" ixy="1E-9" ixz="1E-9" iyy="1E-9" iyz="1E-9" izz="1E-9" />
    </inertial>
  </link>
  <gazebo reference="BL_foot_link">
    <selfCollide>false</selfCollide>
    <visual>
      <transparency>1</transparency>
    </visual>
  </gazebo>
  <joint name="BL_foot_joint" type="fixed">
    <parent link="BL_foot_link_3"/>
    <child link="BL_foot_link"/>
    <origin rpy="0 -1.5708 0" xyz="0.031 0 0"/>
  </joint>
  <!-- Set up depth sensors (pico flexx) -->
  <link name="BL_depth_sensor_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0" />
      <mass value="0.35" />
      <inertia ixx="1E-9" ixy="1E-9" ixz="1E-9" iyy="1E-9" iyz="1E-9" izz="1E-9" />
    </inertial>
    <visual>
      <geometry>
        <mesh filename="meshes/depth_sensor.stl"/>
      </geometry>
      <origin rpy="1.5708 3.1415 -2.141519" xyz="-0.007 -0.0169 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.02 0.025 0.08"/>
        <!-- <mesh filename="meshes/foot_link_collision.stl"/> -->
      </geometry>
      <origin rpy="0 0 0" xyz="0 0.002 0.01"/>
      <!-- <origin rpy="0 0 0" xyz="0 0 0"/> -->
    </collision>
  </link>
  <joint name="BL_depth_sensor_joint" type="fixed">
    <origin rpy="0 0 0.5707" xyz="0.00234 0.03805 0"/>
    <parent link="BL_tibia_link"/>
    <child link="BL_depth_sensor_link"/>
  </joint>
  <joint name="BL_depth_sensor_optical_joint" type="fixed">
    <origin rpy="-1.5708 0 -1.5708" xyz="0 0 0"/>
    <parent link="BL_depth_sensor_link"/>
    <child link="gazebo_BL_leg_optical_frame"/>
  </joint>
  <link name="gazebo_BL_leg_optical_frame">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <mass value="0.00000001" />
      <inertia ixx="0.00000001" ixy="0.00000001" ixz="0.00000001" iyy="0.00000001" iyz="0.00000001" izz="0.00000001" />
    </inertial>
  </link>
  <gazebo reference="BL_depth_sensor_link">
    <selfCollide>true</selfCollide>
    <material>Gazebo/DarkGrey</material>
    <sensor name="pico_flexx_BL_leg" type="depth">
      <update_rate>20</update_rate>
      <camera>
        <horizontal_fov>1.082104</horizontal_fov>
        <image>
          <width>224</width>
          <height>171</height>
          <format>R8G8B8</format>
        </image>
        <clip>
          <near>0.001</near>
          <far>4</far>
        </clip>
      </camera>
      <plugin filename="libgazebo_ros_openni_kinect.so" name="kinect">
        <baseline>0.2</baseline>
        <alwaysOn>true</alwaysOn>
        <!-- Keep this zero, update_rate in the parent <sensor> tag
            will control the frame rate. -->
        <updateRate>0.0</updateRate>
        <cameraName>camera_ir_BL</cameraName>
        <imageTopicName>/pico_flexx_BL_leg/color/image_raw</imageTopicName>
        <cameraInfoTopicName>/pico_flexx_BL_leg/color/camera_info</cameraInfoTopicName>
        <depthImageTopicName>/pico_flexx_BL_leg/depth/image_raw</depthImageTopicName>
        <depthImageCameraInfoTopicName>/pico_flexx_BL_leg/depth/camera_info</depthImageCameraInfoTopicName>
        <pointCloudTopicName>/pico_flexx_BL_leg/points</pointCloudTopicName>
        <frameName>gazebo_BL_leg_optical_frame</frameName>
        <pointCloudCutoff>0.001</pointCloudCutoff>
        <pointCloudCutoffMax>4.0</pointCloudCutoffMax>
        <distortionK1>0</distortionK1>
        <distortionK2>0</distortionK2>
        <distortionK3>0</distortionK3>
        <distortionT1>0</distortionT1>
        <distortionT2>0</distortionT2>
        <CxPrime>0</CxPrime>
        <Cx>0</Cx>
        <Cy>0</Cy>
        <focalLength>0</focalLength>
        <hackBaseline>0</hackBaseline>
      </plugin>
    </sensor>
  </gazebo>
  <!-- Setup transmissions for joints -->
  <transmission name="BL_coxa_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="BL_coxa_joint">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="BL_coxa_motor">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="BL_femur_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="BL_femur_joint">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="BL_femur_motor">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="BL_tibia_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="BL_tibia_joint">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="BL_tibia_motor">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <gazebo reference="BL_foot_link_3">
    <gravity>true</gravity>
    <sensor name="BL_imu_sensor" type="imu">
      <always_on>true</always_on>
      <update_rate>100</update_rate>
      <visualize>true</visualize>
      <topic>__default_topic__</topic>
      <plugin filename="libimu_plugin.so" name="imu_plugin">
        <topicName>magneto/BL_imu/data</topicName>
        <bodyName>base_link</bodyName>
        <updateRateHZ>10.0</updateRateHZ>
        <gaussianNoise>0.0</gaussianNoise>
        <xyzOffset>0 0 0</xyzOffset>
        <rpyOffset>0 0 0</rpyOffset>
        <frameName>base_link</frameName>
      </plugin>
      <pose>0 0 0 0 0 0</pose>
    </sensor>
  </gazebo>
  <!-- Setup links and joints -->
  <link name="AL_coxa_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0.02017 0"/>
      <!-- Z listed as 0.00275 in solidworks, but set to zero here -->
      <mass value="0.05629"/>
      <inertia ixx="63834.17E-09" ixy="0" ixz="0" iyy="28435.19E-09" iyz="0" izz="43053.31E-09"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="meshes/coxa_link.stl"/>
      </geometry>
      <origin rpy="-1.5708 1.5708 0" xyz="0 0 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="meshes/coxa_link_collision.stl"/>
      </geometry>
      <origin rpy="-1.5708 1.5708 0" xyz="0 0.002 0"/>
    </collision>
  </link>
  <gazebo reference="AL_coxa_link">
    <selfCollide>true</selfCollide>
    <material>Gazebo/DarkGrey</material>
  </gazebo>
  <joint name="AL_coxa_joint" type="revolute">
    <axis xyz="0 1 0"/>
    <limit effort="100.0" lower="-2.355" upper="2.355" velocity="5"/>
    <parent link="base_link"/>
    <child link="AL_coxa_link"/>
    <origin rpy="1.5708 0 0.785" xyz="0.125585 0.095614 0.0527"/>
  </joint>
  <link name="AL_femur_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0.03310 0.01707 0.00057"/>
      <mass value="0.25695"/>
      <inertia ixx="234481.95E-09" ixy="89612.82E-09" ixz="22993.28E-09" iyy="1057680.13E-09" iyz="-822.12E-09" izz="1137178.68E-09"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="meshes/femur_link.stl"/>
      </geometry>
      <origin rpy="3.14159 0 0" xyz="0 0 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="meshes/femur_link_collision.stl"/>
      </geometry>
      <origin rpy="-1.5708 0 0" xyz="0 -0.015 0"/>
    </collision>
  </link>
  <gazebo reference="AL_femur_link">
    <selfCollide>true</selfCollide>
    <material>Gazebo/DarkGrey</material>
  </gazebo>
  <joint name="AL_femur_joint" type="revolute">
    <axis xyz="0 0 1"/>
    <limit effort="100.0" lower="-1.571" upper="2.355" velocity="5"/>
    <parent link="AL_coxa_link"/>
    <child link="AL_femur_link"/>
    <origin rpy="0 0 0" xyz="0 0.0393 0"/>
  </joint>
  <link name="AL_tibia_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0.02851 -0.00001 0.00014"/>
      <mass value="0.20721"/>
      <inertia ixx="62871.39E-09" ixy="-357.79E-09" ixz="-3541.38E-09" iyy="397773.72E-09" iyz="114.38E-09" izz="374723.21E-09"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="meshes/tibia_link.stl"/>
      </geometry>
      <origin rpy="0 -1.5708 0" xyz="0.126 0 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="meshes/tibia_link_collision.stl"/>
      </geometry>
      <origin rpy="0 -1.5708 0" xyz="0.1263 0 0"/>
    </collision>
  </link>
  <gazebo reference="AL_tibia_link">
    <selfCollide>true</selfCollide>
    <material>Gazebo/DarkGrey</material>
  </gazebo>
  <joint name="AL_tibia_joint" type="revolute">
    <axis xyz="0 0 1"/>
    <limit effort="100.0" lower="-2.355" upper="0.001" velocity="5"/>
    <parent link="AL_femur_link"/>
    <child link="AL_tibia_link"/>
    <origin rpy="0 0 0" xyz="0.150 0 0"/>
  </joint>
  <link name="AL_foot_link_1">
    <inertial>
      <origin rpy="0 0 0" xyz="0.02E-03 2.88E-03 -4.39E-03"/>
      <mass value="0.03591"/>
      <inertia ixx="60131.00E-09" ixy="610.47E-09" ixz="387.97E-09" iyy="31108.13E-09" iyz="346.50E-09" izz="31112.38E-09"/>
    </inertial>
     --&gt;
    
    <visual>
      <geometry>
        <mesh filename="meshes/foot_link_1.stl"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="meshes/foot_link_1_collision.stl"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
    </collision>
  </link>
  <gazebo reference="AL_foot_link_1">
    <selfCollide>false</selfCollide>
    <material>Gazebo/DarkGrey</material>
    <kp>1000000.0</kp>
    <kd>100.0</kd>
  </gazebo>
  <joint name="AL_foot_joint_1" type="revolute">
    <axis xyz="0 0 1"/>
    <limit effort="100.0" lower="-0.523599" upper="0.523599" velocity="5"/>
    <parent link="AL_tibia_link"/>
    <child link="AL_foot_link_1"/>
    <origin rpy="0 0 0" xyz="0.12 0 0"/>
    <dynamics damping="0.2" friction="0.0"/>
  </joint>
  <gazebo reference="AL_foot_joint_1">
    <implicitSpringDamper>true</implicitSpringDamper>
    <springStiffness>0.5</springStiffness>
    <springReference>0</springReference>
  </gazebo>
  <link name="AL_foot_link_2">
    <inertial>
      <origin rpy="0 0 0" xyz="0.02E-03 2.88E-03 -4.39E-03"/>
      <mass value="0.02961"/>
      <inertia ixx="8786.61E-09" ixy="34.74E-09" ixz="7.47E-09" iyy="10893.41E-09" iyz="-95.83E-09" izz="17608.23E-09"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="meshes/foot_link_2.stl"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="meshes/foot_link_2_collision.stl"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
    </collision>
  </link>
  <gazebo reference="AL_foot_link_2">
    <selfCollide>false</selfCollide>
    <material>Gazebo/DarkGrey</material>
    <kp>1000000.0</kp>
    <kd>100.0</kd>
  </gazebo>
  <joint name="AL_foot_joint_2" type="revolute">
    <axis xyz="0 1 0"/>
    <limit effort="100.0" lower="-0.418879" upper="0.418879" velocity="5"/>
    <parent link="AL_foot_link_1"/>
    <child link="AL_foot_link_2"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <dynamics damping="0.2" friction="0.0"/>
  </joint>
  <gazebo reference="AL_foot_joint_2">
    <implicitSpringDamper>true</implicitSpringDamper>
    <springStiffness>0.5</springStiffness>
    <springReference>0</springReference>
  </gazebo>
  <link name="AL_foot_link_3">
    <inertial>
      <origin rpy="0 0 0" xyz="0.02E-03 2.88E-03 -4.39E-03"/>
      <mass value="0.19862"/>
      <inertia ixx="49836.99E-09" ixy="144.66E-09" ixz="-4031.72E-09" iyy="81967.91E-09" iyz="-678.12E-09" izz="69129.32E-09"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="meshes/foot_link_3.stl"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="meshes/foot_link_3_collision.stl"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
    </collision>
  </link>
  <gazebo reference="AL_foot_link_3">
    <selfCollide>false</selfCollide>
    <material>Gazebo/DarkGrey</material>
    <visual>
      <plugin filename="libcolor_change_plugin.so" name="color_change">
        <control_topic>AL</control_topic>
      </plugin>
    </visual>
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>999999999999999999999999999999999999999</mu1>
    <mu2>999999999999999999999999999999999999999</mu2>
    <sensor name="AL_magnet_contact_sensor" type="contact">
      <always_on>true</always_on>
      <update_rate>30.0</update_rate>
      <contact>
        <collision>AL_foot_link_3_collision</collision>
      </contact>
      <plugin filename="libcontact_plugin.so" name="contact_plugin">
        <bumperTopicName>AL_proximity_sense</bumperTopicName>
        <frameName>AL_foot_link_3</frameName>
      </plugin>
    </sensor>
  </gazebo>
  <joint name="AL_foot_joint_3" type="revolute">
    <axis xyz="1 0 0"/>
    <limit effort="100.0" lower="-2.07694" upper="2.07694" velocity="5"/>
    <parent link="AL_foot_link_2"/>
    <child link="AL_foot_link_3"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <dynamics damping="0.2" friction="0.0"/>
  </joint>
  <gazebo reference="AL_foot_joint_3">
    <implicitSpringDamper>true</implicitSpringDamper>
    <springStiffness>0.5</springStiffness>
    <springReference>0</springReference>
  </gazebo>
  <link name="AL_foot_link">
    <!--THIS LINK IS ONLY USED FOR VISUALISATION IN RVIZ-->
    <!--visual>
      <geometry>
        <mesh filename="meshes/foot_link.stl"/>
      </geometry>
      <origin rpy="0 -1.5708 0" xyz="0 0 0"/>
      <material name="white"/>
    </visual-->
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0" />
      <mass value="0.000001" />
      <inertia ixx="1E-9" ixy="1E-9" ixz="1E-9" iyy="1E-9" iyz="1E-9" izz="1E-9" />
    </inertial>
  </link>
  <gazebo reference="AL_foot_link">
    <selfCollide>false</selfCollide>
    <visual>
      <transparency>1</transparency>
    </visual>
  </gazebo>
  <joint name="AL_foot_joint" type="fixed">
    <parent link="AL_foot_link_3"/>
    <child link="AL_foot_link"/>
    <origin rpy="0 -1.5708 0" xyz="0.031 0 0"/>
  </joint>
  <!-- Set up depth sensors (pico flexx) -->
  <link name="AL_depth_sensor_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0" />
      <mass value="0.35" />
      <inertia ixx="1E-9" ixy="1E-9" ixz="1E-9" iyy="1E-9" iyz="1E-9" izz="1E-9" />
    </inertial>
    <visual>
      <geometry>
        <mesh filename="meshes/depth_sensor.stl"/>
      </geometry>
      <origin rpy="1.5708 3.1415 -2.141519" xyz="-0.007 -0.0169 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.02 0.025 0.08"/>
        <!-- <mesh filename="meshes/foot_link_collision.stl"/> -->
      </geometry>
      <origin rpy="0 0 0" xyz="0 0.002 0.01"/>
      <!-- <origin rpy="0 0 0" xyz="0 0 0"/> -->
    </collision>
  </link>
  <joint name="AL_depth_sensor_joint" type="fixed">
    <origin rpy="0 0 0.5707" xyz="0.00234 0.03805 0"/>
    <parent link="AL_tibia_link"/>
    <child link="AL_depth_sensor_link"/>
  </joint>
  <joint name="AL_depth_sensor_optical_joint" type="fixed">
    <origin rpy="-1.5708 0 -1.5708" xyz="0 0 0"/>
    <parent link="AL_depth_sensor_link"/>
    <child link="gazebo_AL_leg_optical_frame"/>
  </joint>
  <link name="gazebo_AL_leg_optical_frame">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <mass value="0.00000001" />
      <inertia ixx="0.00000001" ixy="0.00000001" ixz="0.00000001" iyy="0.00000001" iyz="0.00000001" izz="0.00000001" />
    </inertial>
  </link>
  <gazebo reference="AL_depth_sensor_link">
    <selfCollide>true</selfCollide>
    <material>Gazebo/DarkGrey</material>
    <sensor name="pico_flexx_AL_leg" type="depth">
      <update_rate>20</update_rate>
      <camera>
        <horizontal_fov>1.082104</horizontal_fov>
        <image>
          <width>224</width>
          <height>171</height>
          <format>R8G8B8</format>
        </image>
        <clip>
          <near>0.001</near>
          <far>4</far>
        </clip>
      </camera>
      <plugin filename="libgazebo_ros_openni_kinect.so" name="kinect">
        <baseline>0.2</baseline>
        <alwaysOn>true</alwaysOn>
        <!-- Keep this zero, update_rate in the parent <sensor> tag
            will control the frame rate. -->
        <updateRate>0.0</updateRate>
        <cameraName>camera_ir_AL</cameraName>
        <imageTopicName>/pico_flexx_AL_leg/color/image_raw</imageTopicName>
        <cameraInfoTopicName>/pico_flexx_AL_leg/color/camera_info</cameraInfoTopicName>
        <depthImageTopicName>/pico_flexx_AL_leg/depth/image_raw</depthImageTopicName>
        <depthImageCameraInfoTopicName>/pico_flexx_AL_leg/depth/camera_info</depthImageCameraInfoTopicName>
        <pointCloudTopicName>/pico_flexx_AL_leg/points</pointCloudTopicName>
        <frameName>gazebo_AL_leg_optical_frame</frameName>
        <pointCloudCutoff>0.001</pointCloudCutoff>
        <pointCloudCutoffMax>4.0</pointCloudCutoffMax>
        <distortionK1>0</distortionK1>
        <distortionK2>0</distortionK2>
        <distortionK3>0</distortionK3>
        <distortionT1>0</distortionT1>
        <distortionT2>0</distortionT2>
        <CxPrime>0</CxPrime>
        <Cx>0</Cx>
        <Cy>0</Cy>
        <focalLength>0</focalLength>
        <hackBaseline>0</hackBaseline>
      </plugin>
    </sensor>
  </gazebo>
  <!-- Setup transmissions for joints -->
  <transmission name="AL_coxa_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="AL_coxa_joint">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="AL_coxa_motor">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="AL_femur_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="AL_femur_joint">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="AL_femur_motor">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="AL_tibia_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="AL_tibia_joint">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="AL_tibia_motor">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <gazebo reference="AL_foot_link_3">
    <gravity>true</gravity>
    <sensor name="AL_imu_sensor" type="imu">
      <always_on>true</always_on>
      <update_rate>100</update_rate>
      <visualize>true</visualize>
      <topic>__default_topic__</topic>
      <plugin filename="libimu_plugin.so" name="imu_plugin">
        <topicName>magneto/AL_imu/data</topicName>
        <bodyName>base_link</bodyName>
        <updateRateHZ>10.0</updateRateHZ>
        <gaussianNoise>0.0</gaussianNoise>
        <xyzOffset>0 0 0</xyzOffset>
        <rpyOffset>0 0 0</rpyOffset>
        <frameName>base_link</frameName>
      </plugin>
      <pose>0 0 0 0 0 0</pose>
    </sensor>
  </gazebo>
</robot>

